<div style="max-width: 600px; margin: 0 auto; padding: 20px;">
  
  <div class="card" style="padding: 20px; margin-bottom: 20px;">
    <%= form_with model: @post, local: true do |f| %>
      <%= f.text_area :content, placeholder: "„ÅÑ„Åæ„Å©„ÅÜ„Åó„Å¶„ÇãÔºü", style: "width: 100%; border: none; font-size: 1.2rem; outline: none; resize: none; min-height: 100px;" %>
      <div style="display: flex; justify-content: space-between; align-items: center; border-top: 1px solid var(--border-color); padding-top: 15px;">
        <%= f.file_field :image, style: "font-size: 0.8rem; color: var(--text-sub);" %>
        <%= f.submit "ÊäïÁ®ø„Åô„Çã", class: "btn-primary" %>
      </div>
    <% end %>
  </div>

  <% @posts.each do |post| %>
    <div class="card" style="margin-bottom: 12px; padding: 16px;">
      <div style="display: flex; gap: 12px;">
        <%# „Ç¢„Ç§„Ç≥„É≥ %>
        <%= link_to user_path(post.user) do %>
          <% if post.user.profile_image.attached? %>
            <%= image_tag post.user.profile_image, style: "width: 48px; height: 48px; border-radius: 50%; object-fit: cover;" %>
          <% else %>
            <div style="width: 48px; height: 48px; border-radius: 50%; background: #e1e8ed;"></div>
          <% end %>
        <% end %>

        <div style="flex: 1;">
          <div style="display: flex; justify-content: space-between;">
            <span style="font-weight: bold;"><%= post.user.nickname.presence || post.user.email %></span>
            <span style="color: var(--text-sub); font-size: 0.85rem;"><%= post.created_at.strftime("%H:%M") %></span>
          </div>
          
          <p style="margin: 8px 0; font-size: 1rem;"><%= render_with_hashtags(post.content) %></p>
          
          <% if post.image.attached? %>
            <%= image_tag post.image, style: "width: 100%; border-radius: 12px; margin-top: 10px; border: 1px solid var(--border-color);" %>
          <% end %>

          <div style="display: flex; gap: 30px; margin-top: 15px; color: var(--text-sub);">
            <%# „ÅÑ„ÅÑ„Å≠ %>
            <div style="display: flex; align-items: center; gap: 4px;">
              <% if post.user != current_user %>
                <%= button_to post_likes_path(post), method: post.likes.find_by(user_id: current_user.id) ? :delete : :post, form: {data: {turbo: false}}, style: "background:none; border:none; cursor:pointer; padding:0;" do %>
                  <%= post.likes.find_by(user_id: current_user.id) ? "‚ù§Ô∏è" : "ü§ç" %>
                <% end %>
              <% else %>
                ‚ù§Ô∏è
              <% end %>
              <span style="font-size: 0.9rem;"><%= post.likes.count %></span>
            </div>
            <%# „Ç≥„É°„É≥„Éà„É™„É≥„ÇØ %>
            <%= link_to post_path(post), style: "text-decoration:none; color:inherit; display:flex; align-items:center; gap:4px;" do %>
              <span>üí¨</span> <span style="font-size: 0.9rem;"><%= post.comments.count %></span>
            <% end %>
            <%# Á∑®ÈõÜÔºàËá™ÂàÜ„ÅÆÊäïÁ®ø„ÅÆ„ÅøÔºâ %>
            <% if post.user == current_user %>
              <%= link_to "Á∑®ÈõÜ", edit_post_path(post), style: "text-decoration:none; color: var(--primary-color); font-size: 0.85rem;" %>
            <% end %>
          </div>
        </div>
      </div>
    </div>
  <% end %>
</div>