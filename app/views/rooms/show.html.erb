<div style="max-width: 600px; margin: 2rem auto; font-family: sans-serif;">
  <div style="background-color: #f8f9fa; padding: 15px; border-radius: 8px 8px 0 0; border-bottom: 1px solid #ddd; display: flex; align-items: center; justify-content: space-between;">
    <h3 style="margin: 0; font-size: 1.1rem;">チャットルーム</h3>
    <%= link_to "戻る", :back, style: "color: #666; text-decoration: none; font-size: 0.9rem;" %>
  </div>

  <div style="height: 400px; overflow-y: auto; padding: 20px; border-left: 1px solid #ddd; border-right: 1px solid #ddd; background-color: white;">
    <% if @messages.any? %>
      <% @messages.each do |m| %>
        <div style="margin-bottom: 15px; display: flex; flex-direction: column; align-items: <%= m.user == current_user ? 'flex-end' : 'flex-start' %>;">
          <div style="max-width: 70%; padding: 10px 15px; border-radius: 15px; font-size: 0.95rem; 
                      background-color: <%= m.user == current_user ? '#007bff' : '#e9ecef' %>; 
                      color: <%= m.user == current_user ? 'white' : 'black' %>;">
            <%= m.content %>
          </div>
          <small style="color: #999; font-size: 0.7rem; margin-top: 5px;">
            <%= m.created_at.strftime("%H:%M") %>
          </small>
        </div>
      <% end %>
    <% else %>
      <p style="text-align: center; color: #999; margin-top: 100px;">最初のメッセージを送りましょう！</p>
    <% end %>
  </div>

  <div style="padding: 15px; border: 1px solid #ddd; border-radius: 0 0 8px 8px; background-color: #f8f9fa;">
    <%= form_with model: @message, local: true, style: "display: flex; gap: 10px;" do |f| %>
      <%= f.text_field :content, placeholder: "メッセージを入力...", style: "flex: 1; padding: 10px; border: 1px solid #ccc; border-radius: 4px; outline: none;" %>
      <%= f.hidden_field :room_id, value: @room.id %>
      <%= f.submit "送信", style: "background-color: #007bff; color: white; border: none; padding: 0 20px; border-radius: 4px; cursor: pointer; font-weight: bold;" %>
    <% end %>
  </div>
</div>